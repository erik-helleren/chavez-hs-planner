[WIP] Refactor requirement functions

* replace individual functions with higher-order-functions

* write selective enrollment requirement function factory

* Michael, this was a mistake.
