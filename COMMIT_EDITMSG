Refactor shared/timeout to fix bug in cancel() method

* cancel method didn't correctly cancel timers
  ** NOTE this was as much due to the fact that I didn't think
    through the details of the implmentation and the edge cases
    until I actually had to write the tests. Another reason
    to write them first, huh.
